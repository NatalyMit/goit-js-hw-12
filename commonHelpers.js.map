{"version":3,"file":"commonHelpers.js","sources":["../src/templates/articles.js","../src/services/galleryApi.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nexport default function createGallery(arr, galleryEL) {\n  const lightbox = new SimpleLightbox('.gallery-images a', {\n    captionDelay: 250,\n  });\n  const markup = arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<li class = \"list-item\">\n      <a href=\"${largeImageURL}\" ><img class=\"search-image\" src = \"${webformatURL}\" alt = \"${tags}\" ><div class=\"options\">\n      <p class=\"options-item\"> likes:<span class=\"options-item-span\">${likes}</span></p>\n      <p class=\"options-item\"> views:<span class=\"options-item-span\">${views}</span></p>\n      <p class=\"options-item\"> comments:<span class=\"options-item-span\">${comments}</span></p>\n      <p class=\"options-item\"> downloads:<span class=\"options-item-span\">${downloads}</span></p></div>\n    \n      </a>\n      \n      </li>`\n    )\n    .join('');\n\n  galleryEL.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n","import axios from 'axios';\n\nasync function getGallery({ query, page = 1, per_page }) {\n  const BASE_URL = 'https://pixabay.com';\n  const API_KEY = '41909271-8b5dab2225a1cd5a9757159a5';\n  const ENDPOINT = 'api/';\n  try {\n    const response = await axios.get(`${BASE_URL}/${ENDPOINT}`, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        per_page,\n        page,\n      },\n    });\n    console.log(response);\n    return response.data;\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      titleSize: '30',\n      messageSize: '25',\n      message: 'Sorry! Try later! Server not working',\n    });\n    console.error(error.message);\n  }\n}\n\nexport { getGallery };\n","import createGallery from './templates/articles.js';\nimport { getGallery } from './services/galleryApi.js';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  formEl: document.querySelector('.form-search'),\n  galleryEL: document.querySelector('.gallery-images'),\n  loadMoreEl: document.querySelector('[data-action=\"load-more\"]'),\n  preloader: document.getElementById('preloader'),\n};\n\nconst hiddenClass = 'is-hidden';\n\nconst queryParams = {\n  query: '',\n  page: 1,\n  maxPage: 0,\n  per_page: 40,\n};\n\nrefs.formEl.addEventListener('submit', handleSearch);\n\nasync function handleSearch(event) {\n  event.preventDefault();\n\n  refs.galleryEL.innerHTML = '';\n\n  queryParams.page = 1;\n\n  const form = event.currentTarget;\n  queryParams.query = form.elements.query.value.trim();\n\n  if (!queryParams.query) {\n    iziToast.show({\n      title: '❌',\n      messageColor: 'white',\n      message: 'Sorry, You have not entered any word.Please try again!',\n      position: 'topRight',\n      color: 'red',\n    });\n    return;\n  }\n\n  try {\n    const { hits, totalHits } = await getGallery(queryParams);\n    if (!totalHits) {\n      refs.loadMoreEl.classList.add(hiddenClass);\n      iziToast.show({\n        title: '❌',\n        messageColor: 'white',\n        message:\n          'Sorry, we dont have any pictures for your request.Please try again!',\n        position: 'topRight',\n        color: 'red',\n      });\n      return;\n    }\n\n    queryParams.maxPage = Math.ceil(totalHits / queryParams.per_page);\n\n    createGallery(hits, refs.galleryEL);\n\n    if (hits.length > 0 && hits.length !== totalHits) {\n      refs.loadMoreEl.classList.remove(hiddenClass);\n      refs.loadMoreEl.addEventListener('click', handleLoadMore);\n    } else if (!hits.length) {\n      refs.loadMoreEl.classList.add(hiddenClass);\n\n      iziToast.error({\n        title: 'Error',\n        titleSize: '30',\n        messageSize: '25',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    } else {\n      refs.loadMoreEl.classList.add(hiddenClass);\n    }\n  } catch (error) {\n    console.log(err);\n  } finally {\n    form.reset();\n  }\n\n  async function handleLoadMore() {\n    queryParams.page += 1;\n    refs.preloader.classList.remove(hiddenClass);\n    refs.loadMoreEl.classList.add(hiddenClass);\n    refs.loadMoreEl.disabled = true;\n\n    const getHeightImgCard = document\n      .querySelector('.list-item')\n      .getBoundingClientRect();\n\n    try {\n      const { hits } = await getGallery(queryParams);\n\n      createGallery(hits, refs.galleryEL);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      window.scrollBy({\n        top: getHeightImgCard.height * 2,\n        left: 0,\n        behavior: 'smooth',\n      });\n\n      refs.preloader.classList.add(hiddenClass);\n      refs.loadMoreEl.disabled = false;\n      refs.loadMoreEl.classList.remove(hiddenClass);\n\n      if (queryParams.page === queryParams.maxPage) {\n        refs.loadMoreEl.classList.add(hiddenClass);\n        refs.loadMoreEl.removeEventListener('click', handleLoadMore);\n        iziToast.show({\n          title: 'Finish',\n          messageColor: 'white',\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: 'bottomCenter',\n          color: 'blue',\n        });\n      }\n    }\n  }\n}\n"],"names":["createGallery","arr","galleryEL","lightbox","SimpleLightbox","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","getGallery","query","page","per_page","BASE_URL","API_KEY","ENDPOINT","response","axios","error","refs","hiddenClass","queryParams","handleSearch","event","form","iziToast","hits","totalHits","handleLoadMore","getHeightImgCard"],"mappings":"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"}